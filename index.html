<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quick Project Solutions | Roofing • Claims • Remodeling • Solar</title>
  <meta name="description" content="Quick Project Solutions – Roofing, insurance claim assistance, storm damage repair, interior & exterior remodeling, and solar installs. Fast, transparent, professional." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1220;
      --bg-2:#0e1528;
      --text:#e8eefc;
      --muted:#b8c1d9;
      --primary:#3a82f6; /* blue */
      --primary-2:#2dd4bf; /* teal */
      --accent:#ffd166; /* warm accent */
      --card:#121a2f;
      --border:#22304d;
      --success:#22c55e;
      --danger:#ef4444;
      --radius:18px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 700px at 80% -10%, rgba(45,212,191,.18), transparent 60%),
                  radial-gradient(900px 500px at -10% 20%, rgba(58,130,246,.18), transparent 60%),
                  var(--bg);
      color:var(--text);
      line-height:1.6;
    }
    a{color:var(--primary);text-decoration:none}
    img{max-width:100%;display:block}

    /* Layout */
    .container{max-width:1200px;margin-inline:auto;padding:0 20px}
    header{position:sticky;top:0;z-index:50;background:linear-gradient(180deg, rgba(11,18,32,.9), rgba(11,18,32,.75));backdrop-filter: blur(6px);border-bottom:1px solid var(--border)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:16px 0}
    .brand{display:flex;align-items:center;gap:15px}
    .brand-logo{width:auto;height:auto;border-radius:1px;display:grid;place-items:center;}
    .brand-logo svg{filter:drop-shadow(0 4px 10px rgba(0,0,0,.35))}
    .brand h1{font-size:1.1rem;margin:0;letter-spacing:.2px}
    .tag{display:inline-block;padding:2px 10px;border:1px solid var(--border);border-radius:999px;color:var(--muted);font-size:.78rem;margin-left:10px}

    nav ul{list-style:none;display:flex;gap:18px;margin:0;padding:0}
    nav a{display:inline-block;padding:10px 12px;border-radius:12px;color:var(--text)}
    nav a:hover{background:rgba(255,255,255,.06)}

    .btn{display:inline-flex;align-items:center;gap:10px;padding:12px 18px;border-radius:14px;border:1px solid var(--border);background:linear-gradient(180deg, #15203b, #0f1931);color:var(--text);box-shadow:var(--shadow)}
    .btn.primary{background:linear-gradient(180deg, #3a82f6, #2b6cd4);border-color:rgba(255,255,255,.12)}
    .btn.primary:hover{filter:brightness(1.05)}

    /* Hero */
    .hero{position:relative;padding:64px 0 48px;border-bottom:1px solid var(--border);overflow:hidden}
    .hero::after{content:"";position:absolute;inset:auto -10% -60px -10%;height:200px;background:radial-gradient(60% 120% at 50% 0%, rgba(58,130,246,.25), transparent 70%)}
    .hero-grid{display:grid;grid-template-columns:1.2fr .8fr;gap:36px;align-items:center}
    .eyebrow{display:inline-block;font-weight:700;color:var(--accent);letter-spacing:.08em;text-transform:uppercase;font-size:.8rem}
    .hero h2{font-size:clamp(2rem,5.2vw,3.4rem);line-height:1.1;margin:.5rem 0 .8rem}
    .hero p{color:var(--muted);max-width:55ch}
    .hero-cta{display:flex;gap:12px;margin-top:18px;flex-wrap:wrap}

    .stat-row{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:26px}
    .stat{background:linear-gradient(180deg,#131e36,#111a30);border:1px solid var(--border);border-radius:16px;padding:14px 16px}
    .stat b{font-size:1.3rem}

    .hero-card{background:linear-gradient(180deg,#12203d,#0e1a32);border:1px solid var(--border);border-radius:18px;padding:18px;box-shadow:var(--shadow)}
    .check{display:flex;align-items:center;gap:10px;color:#d7e2fb}

    /* Services */
    section{padding:64px 0}
    .section-title{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:22px}
    .section-title h3{margin:0;font-size:clamp(1.4rem,3.2vw,2rem)}
    .muted{color:var(--muted)}

    .grid{display:grid;gap:16px}
    .grid.cards{grid-template-columns:repeat(12,1fr)}
    .card{grid-column:span 4;background:linear-gradient(180deg,#111a2f,#0c1528);border:1px solid var(--border);border-radius:18px;padding:18px;transition:transform .15s ease}
    .card:hover{transform:translateY(-2px)}
    .card h4{margin:.2rem 0 .4rem}
    .pill{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);border-radius:999px;padding:4px 10px;font-size:.8rem;color:var(--muted)}
    .card .desc{color:var(--muted);font-size:.95rem}
    .card-feat{display:flex;gap:10px;align-items:flex-start}
    .icon{width:34px;height:34px;border-radius:10px;display:grid;place-items:center;background:linear-gradient(135deg, rgba(58,130,246,.15), rgba(45,212,191,.15));border:1px solid var(--border)}

    /* Remodeling split */
    .split{display:grid;grid-template-columns:1fr 1fr;gap:24px}
    .panel{background:linear-gradient(180deg,#101a33,#0e182d);border:1px solid var(--border);border-radius:18px;padding:18px}

    /* Testimonials */
    .testimonials{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .quote{background:linear-gradient(180deg,#0f1931,#0d172b);border:1px solid var(--border);border-radius:18px;padding:18px}
    blockquote{margin:0;color:#dbe6ff}
    .stars{font-size:1.1rem}

    /* CTA band */
    .cta{background:linear-gradient(180deg,#0d172b,#0a1324);border:1px solid var(--border);border-radius:20px;padding:24px;display:grid;grid-template-columns:1.2fr .8fr;gap:16px;align-items:center}

    /* Footer */
    footer{padding:40px 0;border-top:1px solid var(--border);background:linear-gradient(180deg, #0a1324, #0a1324)}
    .footgrid{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:20px}
    .small{font-size:.92rem}
    .credit{margin-top:26px;color:var(--muted)}

    /* Utilities */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    .badge{background:rgba(45,212,191,.15);border:1px solid var(--border);padding:4px 10px;border-radius:999px}

    /* Responsive */
    @media (max-width: 960px){
      .hero-grid{grid-template-columns:1fr}
      .stat-row{grid-template-columns:1fr 1fr}
      .cta{grid-template-columns:1fr}
      .split{grid-template-columns:1fr}
      .testimonials{grid-template-columns:1fr 1fr}
      .footgrid{grid-template-columns:1fr 1fr}
      .card{grid-column:span 6}
    }
    @media (max-width: 640px){
      nav ul{display:none}
      .stat-row{grid-template-columns:1fr}
      .testimonials{grid-template-columns:1fr}
      .footgrid{grid-template-columns:1fr}
      .card{grid-column:span 12}
    }
    /* Gallery */
    .gallery-grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:16px;
    }
    .gallery-item{
      background:linear-gradient(180deg,#111a2f,#0c1528);
      border:1px solid var(--border);
      border-radius:18px;
      overflow:hidden;
      box-shadow:var(--shadow);
      transition:transform .15s ease;
    }
    .gallery-item:hover{transform:translateY(-3px)}
    .gallery-item img{width:100%;height:220px;object-fit:cover}
    .gallery-item p{
      padding:12px;
      margin:0;
      font-size:.9rem;
      color:var(--muted);
    }
    /* AI Form Specific Styles */
    #loading-spinner {
        display: none;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #3b82f6;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    .form-group {
        margin-bottom: 1rem;
    }
    .form-input {
        width: 100%;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid var(--border);
        background: #0a1427;
        color: var(--text);
    }
    #lead-output {
        display: none;
        background: #111a2f;
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 20px;
        margin-top: 20px;
    }
    #lead-output h4 {
        margin: 0 0 10px 0;
        font-size: 1.2rem;
    }
    #lead-content {
        color: var(--muted);
    }
    .message-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.75);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }
    .modal-content {
        background-color: var(--bg-2);
        padding: 20px;
        border-radius: var(--radius);
        border: 1px solid var(--border);
        text-align: center;
        max-width: 400px;
        width: 90%;
    }
  </style>
</head>
<body>
  <a class="sr-only" href="#main">Skip to content</a>
  <header>
    <div class="container nav">
      <div class="brand" aria-label="Quick Project Solutions logo">
        <div class="brand-logo" aria-hidden="true">
          <a href="logo_edited.jpg"></a><img src="logo_edited.jpg" alt="Quick Project Solutions Logo">
        </div>
        <div class="brand-mark" aria-hidden="true">
          <!-- Simple roofline SVG mark -->
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M3 12L12 4l9 8" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M6 10v9h5v-6h2v6h5v-9" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h1>Quick Project Solutions <span class="tag">Licensed • Insured</span></h1>
      </div>
      <nav aria-label="Primary">
        <ul>
          <li><a href="#services">Services</a></li>
          <li><a href="#claims">Insurance Claims</a></li>
          <li><a href="#remodeling">Remodeling</a></li>
          <li><a href="#solar">Solar</a></li>
          <li><a href="#contact" class="btn">Free Inspection</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="main">
    <!-- HERO -->
    <section class="hero">
      <div class="container hero-grid">
        <div>
          <span class="eyebrow">Roofing • Claims • Storm • Remodel • Solar</span>
          <h2>Committed to Excellence</h2>
          <p>
Quick Project Solutions - Powered by Elite Home Solutions At Quick Project Solutions, we bring speed, integrity, and expert guidance to every residential and commercial project. Founded by Dylan Quick, we proudly operate as an independent sales and project coordination partner for Elite Home Solutions, one of the region’s most trusted names in storm restoration, roofing, and general contracting. As a 1099 representative of Elite Home Solutions, Quick Project Solutions acts as your go-to liaison from first inspection to final walkthrough. We help homeowners and business owners navigate everything from insurance claims to material selection to contractor coordination, so you don’t have to stress about the details. Why Choose Us? • ✅ Fast Response, Reliable Results • ✅ Decades of Combined Construction Experience through Elite Home Solutions • ✅ Transparent, Straightforward Communication • ✅ Personalized Service with Big Company BackingQuick Project Solutions - Powered by Elite Home Solutions At Quick Project Solutions, we bring speed, integrity, and expert guidance to every residential and commercial project. Founded by Dylan Quick, we proudly operate as an independent sales and project coordination partner for Elite Home Solutions, one of the region’s most trusted names in storm restoration, roofing, and general contracting. As a 1099 representative of Elite Home Solutions, Quick Project Solutions acts as your go-to liaison from first inspection to final walkthrough. We help homeowners and business owners navigate everything from insurance claims to material selection to contractor coordination, so you don’t have to stress about the details. Why Choose Us? • ✅ Fast Response, Reliable Results • ✅ Decades of Combined Construction Experience through Elite Home Solutions • ✅ Transparent, Straightforward Communication • ✅ Personalized Service with Big Company Backing</p>
          <div class="hero-cta">
            <a href="#contact" class="btn primary" aria-label="Get a free inspection">Get a Free Inspection</a>
            <a href="#services" class="btn" aria-label="See our services">Explore Services</a>
          </div>
          <div class="stat-row">
            <div class="stat"><b>24/7</b><br><span class="muted">Storm Response</span></div>
            <div class="stat"><b>48 hr</b><br><span class="muted">Avg. Claim Prep</span></div>
            <div class="stat"><b>25 yr</b><br><span class="muted">Roof System Warranties*</span></div>
          </div>
        </div>
        <aside class="hero-card" aria-label="Highlights">
          <div class="check"><span class="icon" aria-hidden="true">✔</span> Insurance claim guidance</div>
          <div class="check"><span class="icon" aria-hidden="true">✔</span> Hail & wind restoration</div>
          <div class="check"><span class="icon" aria-hidden="true">✔</span> Interior / exterior remodels</div>
          <div class="check"><span class="icon" aria-hidden="true">✔</span> Roof‑mounted solar installs</div>
          <p class="muted" style="margin-top:10px;font-size:.9rem">*Warranty coverage depends on selected system and manufacturer requirements.</p>
        </aside>
      </div>
    </section>

    <!-- SERVICES GRID -->
    <section id="services" aria-labelledby="services-title">
      <div class="container">
        <div class="section-title">
          <h3 id="services-title">Core Services</h3>
          <span class="badge">Residential • Light Commercial</span>
        </div>
        <div class="grid cards">
          <!-- Roofing -->
          <article class="card" aria-labelledby="roofing-title">
            <div class="card-feat">
              <div class="icon" aria-hidden="true">🏠</div>
              <div>
                <h4 id="roofing-title">Roofing</h4>
                <p class="desc">Asphalt, metal, tile, and flat roof systems. Free inspections, detailed photo reports, financing available.</p>
                <p class="pill">Replacements • Repairs • Ventilation</p>
              </div>
            </div>
          </article>
          <!-- Insurance Claims -->
          <article class="card" id="claims" aria-labelledby="claims-title">
            <div class="card-feat">
              <div class="icon" aria-hidden="true">📄</div>
              <div>
                <h4 id="claims-title">Insurance Claims</h4>
                <p class="desc">We document damage, meet your adjuster, and help you navigate scope, supplements, and code items.</p>
                <p class="pill">Hail • Wind • Water</p>
              </div>
            </div>
          </article>
          <!-- Storm Damage -->
          <article class="card" aria-labelledby="storm-title">
            <div class="card-feat">
              <div class="icon" aria-hidden="true">⛈️</div>
              <div>
                <h4 id="storm-title">Storm Damage</h4>
                <p class="desc">Emergency tarping, leak trace, and restoration for roofing, gutters, siding, and windows. 24/7 dispatch.</p>
                <p class="pill">Emergency • Restoration</p>
              </div>
            </div>
          </article>
          <!-- Interior Remodeling -->
          <article class="card" aria-labelledby="interior-title">
            <div class="card-feat">
              <div class="icon" aria-hidden="true">🛠️</div>
              <div>
                <h4 id="interior-title">Interior Remodeling</h4>
                <p class="desc">Kitchens, baths, flooring, paint, drywall, and insurance‑related build‑backs with tidy job sites.</p>
                <p class="pill">Kitchens • Baths • Floors</p>
              </div>
            </div>
          </article>
          <!-- Exterior Remodeling -->
          <article class="card" aria-labelledby="exterior-title">
            <div class="card-feat">
              <div class="icon" aria-hidden="true">🏡</div>
              <div>
                <h4 id="exterior-title">Exterior Remodeling</h4>
                <p class="desc">Siding, gutters, paint, decks, windows, and doors. Boost curb appeal and energy performance.</p>
                <p class="pill">Siding • Gutters • Windows</p>
              </div>
            </div>
          </article>
          <!-- Solar -->
          <article class="card" id="solar" aria-labelledby="solar-title">
            <div class="card-feat">
              <div class="icon" aria-hidden="true">☀️</div>
              <div>
                <h4 id="solar-title">Solar</h4>
                <p class="desc">Roof‑mounted or ground arrays, roofing‑first approach, permits and interconnection handled end‑to‑end.</p>
                <p class="pill">Design • Install • Monitor</p>
              </div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- REMODELING SPLIT -->
    <section id="remodeling" aria-labelledby="remodel-title">
      <div class="container split">
        <div class="panel">
          <h3 id="remodel-title">Interior & Exterior Remodeling</h3>
          <p class="muted">Whether it’s a storm build‑back or a dream kitchen, we manage trades and timelines so you don’t have to. Transparent scopes, clean sites, and walk‑throughs at every milestone.</p>
          <ul>
            <li>Cabinetry, countertops, tile, and lighting</li>
            <li>Flooring, drywall, paint, trim, and doors</li>
            <li>Decks, siding, gutters, and window replacements</li>
          </ul>
        </div>
        <div class="panel">
          <h4>Why homeowners choose us</h4>
          <ul>
            <li>Dedicated project manager and daily photo updates</li>
            <li>Insurance‑savvy estimating with code upgrades</li>
            <li>Licensed, insured, and manufacturer‑trained crews</li>
          </ul>
          <p class="muted">Ask about design‑assist services and 3D render packages for kitchen and bath layouts.</p>
        </div>
      </div>
    </section>
    <section aria-labelledby="gallery-title">
        <div class="container">
            <div class="section-title">
            <h3 id="gallery-title">Project Gallery</h3>
            <span class="muted">See our recent work</span>
            </div>
            <div class="gallery-grid">
            <div class="gallery-item">
                <img src="01.jpg" alt="New asphalt shingle roof installation">
            
            </div>
            <div class="gallery-item">
                <img src="02.jpg" alt="Modern kitchen remodel with white cabinets">
    
            </div>
            <div class="gallery-item">
                <img src="03.jpg" alt="Solar panels on residential roof">
                
            </div>
            <div class="gallery-item">
                <img src="04.jpg" alt="Exterior siding replacement">
    
            </div>
            <div class="gallery-item">
                <img src="05.jpg" alt="Bathroom remodel with tile shower">
            </div>
            <div class="gallery-item">
                <img src="06.jpg" alt="Emergency tarping after storm">
                
            </div>
            </div>
        </div>

    <!-- TESTIMONIALS -->
    <section aria-labelledby="reviews-title">
      <div class="container">
        <div class="section-title">
          <h3 id="reviews-title">Recent Reviews</h3>
          <span class="muted">Real homeowners • 5‑star service</span>
        </div>
        <div class="testimonials">
          <figure class="quote">
            <div class="stars" aria-hidden="true">★★★★★</div>
            <blockquote>"Just had our siding replaced, painted and roofing done—couldn’t be happier with the results! The crew was incredibly hard-working, quick, and efficient. Communication was smooth from start to finish, and the pricing was more than fair. It’s rare to find a team that delivers quality and professionalism like this. Highly recommend to anyone looking to upgrade their home without the headache.”</blockquote>
            <figcaption class="muted">— Aaron S.</figcaption>
          </figure>
          <figure class="quote">
            <div class="stars" aria-hidden="true">★★★★★</div>
            <blockquote>“Dylan came out and did an inspection for us after a major hail storm! He has helped us fight insurance every step of the way and has kept us informed! He answered my many questions! Highly recommend!”</blockquote>
            <figcaption class="muted">— Jessica E.</figcaption>
          </figure>
          <figure class="quote">
            <div class="stars" aria-hidden="true">★★★★★</div>
            <blockquote>“I recently had my roof replaced by Elite Home Solutions, and I couldn’t be happier with the results. From start to finish, the entire process was smooth and stress-free.

I worked with Dylan Quick, who was extremely knowledgeable, professional, and easy to work with. He walked me through every step of the project, answered all of my questions, and made sure I felt comfortable with the process.”</blockquote>
            <figcaption class="muted">— Anthony B.</figcaption>
          </figure>
        </div>
      </div>
    </section>

    <!-- CTA BAND / CONTACT -->
    <section id="contact" aria-labelledby="contact-title">
      <div class="container cta">
        <div>
          <h3 id="contact-title">Get a Free Roof & Storm Inspection</h3>
          <p class="muted">Tell us a bit about your project. We’ll reach out with a time window and what to expect during the visit.</p>
          <ul class="muted">
            <li>No‑pressure consultation</li>
            <li>Photo report within 24 hours</li>
            <li>We coordinate with your insurer when applicable</li>
          </ul>
        </div>
        <!-- AI Lead Generator Form -->
        <form class="panel" id="lead-form" aria-label="AI lead generation form">
            <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" class="form-input" placeholder="Jane Doe" required>
            </div>
            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" class="form-input" placeholder="jane.doe@example.com" required>
            </div>
            <div class="form-group">
                <label for="address">Street Address</label>
                <input type="text" id="address" class="form-input" placeholder="123 Main Street" required>
            </div>
            <div class="form-group">
                <label for="details">Project Details</label>
                <textarea id="details" rows="4" class="form-input" placeholder="Describe the project, specific issues, and your desired outcome."></textarea>
            </div>
            <button type="submit" id="generate-button" class="btn primary" style="width:100%;justify-content:center">
                Submit
                <span id="loading-spinner"></span>
            </button>
        </form>
        <div id="lead-output" class="panel">
            <h4>Generated Lead Report</h4>
            <div id="lead-content"></div>
        </div>
      </div>
    </section>
  </main>

  <footer>
        <div class="container footgrid">
      <div>
        <div class="brand" style="margin-bottom:10px">
          <div class="brand-logo" aria-hidden="true">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M3 12L12 4l9 8" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M6 10v9h5v-6h2v6h5v-9" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <strong>Quick Project Solutions</strong>
        </div>
        <p class="muted small">Roofing • Insurance Claims • Storm Damage • Interior & Exterior Remodeling • Solar</p>
        <p class="credit small">© <span id="year"></span> Quick Project Solutions. All rights reserved.</p>
      </div>
      <div>
        <strong>Services</strong>
        <ul class="muted small">
          <li>Roof Replacements & Repairs</li>
          <li>Hail & Wind Restoration</li>
          <li>Gutters & Siding</li>
          <li>Windows & Doors</li>
        </ul>
      </div>
      <div>
        <strong>Company</strong>
        <ul class="muted small">
          <li>About</li>
          <li>Licenses & Insurance</li>
          <li>Financing</li>
          <li>Careers</li>
        </ul>
      </di/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////..................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................v>
      <div>
        <strong>Contact</strong>
        <ul class="muted small">
          <li>(316) 245-9692</li>
          <li>sales@quickprojectsolutions.com</li>
          <li>518 N Anna St, Wichita, KS</li>
        </ul>
      </div>
    </div>
  </footer>

  <!-- Custom Message Modal -->
  <div id="message-modal" class="message-modal">
      <div class="modal-content">
          <h3 id="modal-title"></h3>
          <p id="modal-message"></p>
          <button id="modal-close" class="btn primary" style="width:100%;justify-content:center;margin-top:10px">Close</button>
      </div>
  </div>
  
  <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
      import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
      import { getFirestore, collection, addDoc, getDoc, setDoc, doc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

      // --- Firebase Setup ---
      // The following global variables are provided by the canvas environment.
      const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
      const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
      const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
      
      // Check if Firebase config is available before initializing
      if (Object.keys(firebaseConfig).length === 0) {
          console.error('Firebase configuration is not available.');
      }

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);
      const auth = getAuth(app);
      
      let userId = null;

      onAuthStateChanged(auth, async (user) => {
          if (user) {
              userId = user.uid;
          } else {
              if (!initialAuthToken) {
                  try {
                      await signInAnonymously(auth);
                  } catch (error) {
                      console.error("Error signing in anonymously:", error);
                  }
              }
          }
      });
      if (initialAuthToken) {
          signInWithCustomToken(auth, initialAuthToken).then(() => {
              console.log("Signed in with custom token.");
          }).catch(error => {
              console.error("Error signing in with custom token:", error);
              signInAnonymously(auth).catch(anonError => {
                  console.error("Error signing in anonymously after token failure:", anonError);
              });
          });
      }

      // --- DOM Elements ---
      const form = document.getElementById('lead-form');
      const generateButton = document.getElementById('generate-button');
      const loadingSpinner = document.getElementById('loading-spinner');
      const leadOutput = document.getElementById('lead-output');
      const leadContent = document.getElementById('lead-content');
      const messageModal = document.getElementById('message-modal');
      const modalTitle = document.getElementById('modal-title');
      const modalMessage = document.getElementById('modal-message');
      const modalCloseButton = document.getElementById('modal-close');

      // --- UI Functions ---
      const showMessage = (title, message) => {
          modalTitle.textContent = title;
          modalMessage.textContent = message;
          messageModal.style.display = 'flex';
      };

      modalCloseButton.addEventListener('click', () => {
          messageModal.style.display = 'none';
      });

      // --- Firebase & API Logic ---
      const saveLeadToFirestore = async (leadData) => {
          if (!userId) {
              showMessage("Error", "User not authenticated. Please wait and try again.");
              return;
          }
          
          try {
              const leadsCollectionRef = collection(db, `artifacts/${appId}/public/data/leads`);
              await addDoc(leadsCollectionRef, {
                  ...leadData,
                  userId: userId
              });
              console.log("Lead saved successfully to Firestore.");
              showMessage("Success!", "Your lead has been successfully generated and saved.");
          } catch (e) {
              console.error("Error adding document: ", e);
              showMessage("Error", "Failed to save the lead. Please try again.");
          }
      };

      const generateAIContent = async (prompt, retryCount = 0) => {
          const apiKey = "";
          const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
          const maxRetries = 3;
          const baseDelay = 1000;

          const payload = {
              contents: [{ parts: [{ text: prompt }] }],
              tools: [{ "google_search": {} }],
              systemInstruction: {
                  parts: [{ text: "You are a friendly and knowledgeable home improvement expert. Generate a detailed lead report for a home services company. The report should include: 1. A welcoming, personalized introduction. 2. A 'Project Summary' section with the services requested and key details. 3. An 'AI-Driven Assessment' section that provides a brief, high-level overview of the project's potential scope and a next-step recommendation. Your tone should be professional and encouraging. Format the output using Markdown." }]
              },
          };

          try {
              const response = await fetch(apiUrl, {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify(payload)
              });

              if (!response.ok) {
                  if (response.status === 429 && retryCount < maxRetries) {
                      const delay = baseDelay * Math.pow(2, retryCount);
                      console.warn(`Rate limit exceeded. Retrying in ${delay / 1000} seconds...`);
                      await new Promise(res => setTimeout(res, delay));
                      return generateAIContent(prompt, retryCount + 1);
                  }
                  throw new Error(`API call failed with status: ${response.status}`);
              }

              const result = await response.json();
              const text = result?.candidates?.[0]?.content?.parts?.[0]?.text;
              
              if (!text) {
                  throw new Error("API response was empty or malformed.");
              }
              return text;

          } catch (error) {
              console.error("API call error:", error);
              throw error;
          }
      };

      // --- Event Listener ---
      form.addEventListener('submit', async (e) => {
          e.preventDefault();
          
          generateButton.disabled = true;
          generateButton.style.opacity = '0.7';
          loadingSpinner.style.display = 'inline-block';
          leadOutput.style.display = 'none';

          const name = document.getElementById('name').value;
          const email = document.getElementById('email').value;
          const address = document.getElementById('address').value;
          const details = document.getElementById('details').value;
          
          const prompt = `Generate a lead for a homeowner named ${name} at address ${address}. They are interested in: ${details}.`;

          try {
              const generatedText = await generateAIContent(prompt);
              
              leadContent.innerHTML = generatedText.replace(/\n/g, '<br>'); // Use innerHTML to render markdown
              leadOutput.style.display = 'block';

              const leadData = {
                  name,
                  email,
                  address,
                  details,
                  generated_report: generatedText,
                  timestamp: new Date().toISOString(),
              };

              await saveLeadToFirestore(leadData);

          } catch (error) {
              showMessage("Generation Failed", "Could not generate the lead. Please check your network and try again.");
              console.error("Full generation and save process failed:", error);
          } finally {
              generateButton.disabled = false;
              generateButton.style.opacity = '1';
              loadingSpinner.style.display = 'none';
          }
      });
  
      document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
